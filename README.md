# rua 

A **toy** Lua compiler in Rust.

---

## How to play
1. Install Lua v5.1 or later, and make sure `lua` is in your `PATH`.
2. Run `cargo build` 
3. Use `rua input.lua -o input.luac` to translate Lua source file into bytecode.

## Implemented features

### Expressions
1. Literal. (number, string, `nil`, `false`, `true`)
2. Binary expression.
    - Comparison. (==, ~=, <, >, <=, >=, `and`, `or`)
    - Arithmetic. (+, -, *, /)
3. Unary expression. (`not`, -)
4. Parentheses. (`2 * (1 + 2)`)
4. Function call. (`foo(a, b, c)`)

### Statements

1. Global assignment. (`a, b = 1, foo()`)
2. Local assignment. (`local a, b = 1, 2`)
3. Conditions. (`if exp then block {elseif exp then block} [else block] end`)
4. Loops.
    - While clause. (`while exp do block end`)
    - Numeric for clause. (`for name = exp, exp [, exp] do block end`)
4. Function definition. (`foo = function(args) block end`)
5. Return. (`return a, b`)

### Table operations
1. Table constructors. (`table = {1, 2, "hello"}`)
2. Field access. (`inner = table.field`)
3. Table method. (`table:foo(1, 2)`, `table.bar(1, 2)`)

## Known issues
Nested call currently has some bugs (i.e. `a = foo(1, bar(2))`). The generated bytecode is invalid.

## License
This project is licensed under [The Unlicense], so feel free to do whatever you like.

[The Unlicense]:(http://unlicense.org/)
